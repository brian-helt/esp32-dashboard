<!DOCTYPE html>
<html>
<head>
  <title>Brian Tries Things</title>
  <meta charset="utf-8">
  <script>
    function updateValue() {
      fetch("/api/latest")
        .then(res => res.json())
        .then(data => {
          document.getElementById("lux-value").textContent = data.lux ?? "N/A";
          document.getElementById("light-classification").textContent = data.classification ?? "N/A";
          document.getElementById("temperature-value").textContent = data.temperature ?? "N/A";
          document.getElementById("humidity-value").textContent = data.humidity ?? "N/A";
        });
    }

    setInterval(updateValue, 2000);
    window.onload = updateValue;
  </script>
</head>
<body>
  <a href="{{ url_for('about') }}">About</a>
  <h1>Brian Tries Things</h1>
  <h2>
    <a href="https://www.dfrobot.com/product-2183.html">
      Getting Light Data From SEN0390
    </a>
  </h2>

  <p>Current Lux Value: <strong id="lux-value">Loading...</strong></p>
  <p>Light Level Classification: <strong id="light-classification">Loading...</strong></p>
  <p>Current Temperature (Celcius): <strong id="temperature-value">Loading...</strong> Â°C</p>
  <p>Current Humidity: <strong id="humidity-value">Loading...</strong>%</p>
</body>
</html>